# 私有云使用检查

### 首先需要检查一下服务是否正确启动了：
* 在浏览器上直接访问**私有云的管理台界面**，地址：
```
私有云的IP:9090
```
如果出现下面**登陆界面**，代表已经初始化成功了，从下面的界面可以查看一下**私有云的部署情况**，**人员登陆情况**，**插件更新**等等：<br/>
![私有云登陆界面](/image/c1/私有云管理页面.png "Title")

### 下面要检查私有云连接服务的配置文件，路径是
```
/ecology/WEB-INF/prop/OpenfireModule.properties
```
根据下图的配置项，我们来一一介绍：<br/>
![配置文件说明](/image/c1/客户端连接服务配置说明.png "Title")
* 下面再来全面的解析一下上图的配置内容，分4个情况在详细说明一下**openfireMobileClientUrl**配置项的配置原因：
* 第一种情况：客户只在内网局域网上使用（emobile和emessage两端）:配置为私有云主机内网ip就可以了
* 第二种情况：只在外网，就是公网上使用：配置为私有云主机公网映射IP即可
* 第三种情况：既能在外网上使用，又要在内网上使用：**配置为域名**，首先需要给私有云主机申请域名，在外网访问的时候域名解析为公网IP地址，在内网上使用的时候，需要设置域名解析服务（**需要单独部署**），将域名解析为内网IP，供内网用户连接
* 第四种情况：emessage仅在内网上使用，emobile仅在外网上使用:增加一个配置项：
```
openfireEmessageClientUrl=内网ip
```
并且配置项`openfireMobileClientUrl`配置为外网IP。

### 注意 ：
以上配置项都需要开通端口**7070**，**9090**，**5222**，**服务器**上这三个端口都需要开放，否则客户端无法连接成功。当**客户端连接**的时候，可以根据下面的办法来判断客户端是否能够连接上消息服务：

### 检查方法需要用到telnet命令，使用非常简单，如下：
```
telnet IP 端口
```
* 按照上方格式使用即可，下图：<br/>
![telnet命令](/image/c1/telnet命令.png "Title")<br/>
IP：指需要访问的IP，端口：需要开放的端口（就是**7070，9090，5222**三个），<br/>
* 如下图展示：端口开放成功示例：<br/>
![telnet成功](/image/c1/telnet成功.png "Title")
* 端口开放失败，如下图：<br/>
![telnet失败](/image/c1/telnet失败.png "Title")





